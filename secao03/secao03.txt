Seção 3: Desenvolvimento de aplicações Web Básico


11. O que vamos aprender nesta seção?

12. O que é Asp .NET?


O Asp.NET é um Framework dentro do .NET
O .NET é uma grande biblioteca de classes que disponibiliza código reutilizável. Dentro dessa grande biblioteca temos sub bibliotecas e uma delas é o Asp.NET
A finalidade desta sub biblioteca é a criação de aplicações Web.


É uma evolução do ASP clássico, Active Server Pages.
Mais do que uma simples evolução, trouxe mais segurança e robustez ao desenvolvimento web.

É possível programar em qualquer linguagem para Asp.Net (Vb, C#, etc)

Dentro da sub biblioteca Asp.NET nos temos outras sub bibliotecas também.

MVC
Web API
SignalR
WebForms
Blazor

13. O que é o padrão MVC? Model, view, controller


Model, view, controller

MVC é um padrão arquitetural que organiza uma aplicação Web em três partes.

Model, View e Controller

ou

Modelo, Vista e Controlador


Cada um destes elementos tem uma função específica:


Model, é a camada onde vamos tratar os dados da aplicação Web.
View, é onde aqueles dados vão ser apresentados ao usuário.
Controller, é o elemento central que vai mediar entre os dois anteriores.


O padrão MVC permite ter flexibilidade e é fácil de manter já que cada camada ter sua finalidade específica.
Você não mistura Dados com Views, nem Controller com Dados, etc.

- A camada de Views vai somente conter código para visualizar dados para o usuário.
- A camada de Controllers vai somente conter o código que permita acessar views ou
dados.
- A camada de Dados (Model) vai se encarregar apenas de tratar os dados e de
encaminhar isso para o controller.



Usuário -> View (Página Web ) -> Controller -> Dados (Model)
	<-                    <-            <-


Por esta organização e flexibilidade é que o padrão MVC é um dos mais usados hoje em dia na Web em geral.

Mesmo outras linguagens e Frameworks adotam padrões similares ao MVC.

Por exemplo, MVVM.

Mas a ideia de todos eles é a mesma, separar cada parte da aplicação Web segundo a sua finalidade.



14. Controllers


Controllers

São classes especializadas que herdam da classe “Controller” do Framework.

Funcionam como um policial de trânsito que controla o fluxo de demandas entre uma View e um Model.

Para cada ação que o usuário da aplicação web demandar, haverá uma ação também representada no controller.


Cada Controller administra uma View ou serie de views relacionadas.
Um Controller é um grande policial que dirige o transito, dependendo do que o usuário pediu vai encaminhar os pedidos para uma outra View ou para os dados.
Ou seja, uma Controller faz encaminhamento de chamadas.

Um usuário clica numa ação, por exemplo, um botão da pagina web (view), isso gera um pedido (requisição) que é atendido pelo Controller, que dependendo da chamada
vai encaminhar e retornar uma View ao usuário onde vai “renderisar” os dados (model)

Esse processo de pedido (requisição) tratado pelo Controller e devolvido como View é feito usando de “Routing” ou encaminhamento

Para realizar estes encaminhamentos o MVC utiliza uma convenção, podemos dizer assim, como a seguir:

public class HomeController : Controller {
	public IActionResult Index() {
		return View(); 
	}
}

Para realizar estes encaminhamentos o MVC utiliza uma convenção, como a seguir:
public class HomeController : Controller {
	public IActionResult Index() {
		return View();
	}
}

Home, é o nome do Controller. O nome é seguido da palavra “Controller".

Index é o nome de uma ação da Controller Home e de uma View ao mesmo tempo. Quer dizer que quando o usuário lançar uma requisição para acessar Index,
o Controller deve ter um método (ação) com o mesmo nome e ao mesmo tempo, deve existir uma View para ser retornada com o mesmo nome.

Assim a rota ficaria Home/Index

Quando eu colocar essa rota no navegador, o Framework já sabe por convenção que o primeiro é o Controller e o segundo é uma View.
Isso é routing.

Logo você estará chamando ao HomeController e solicitando uma View chamada Index.

Um outro detalhe importante, se você escrever apenas o nome da Controller no navegador, por convenção a Controller vai tentar rotear essa chamada para um método Index.
Quando criamos um projeto Asp.NET MVC, o processo de criação da solução já organiza o projeto com as pastas Controllers e Views.



15. Breve introdução à WEB

Como funciona a Web

A Web funciona em cima do protocolo HTTP, Hypertext Transfer Protocol.

Temos outros também, FTP, SMTP...

Protocolo é uma convenção, isto é, um acordo sobre como a comunicação deve funcionar. Em outras palavras, para o intercambio de dados é necessário falar a mesma
língua.

O Http é um mensageiro, ele leva e traz as informações ente computadores conectados a Web (teia).
Funciona em cima do TCP/IP (transmision control protocol/internet protocol), outro protocolo (existe UDP também).

Como em quase tudo, a internet funciona em camadas, cada uma com a sua responsabilidade.

- Aplicação. É aqui que os programas cliente interatuam usando protocolos como o HTTP (browsers), FTP (transferência de arquivos) ou SMTP (e-mails)
- Transporte. TCP ou UDP. A camada de aplicação “conversa” com a camada de transporte usando uma porta. No caso do HTTP normalmente é a famosa porta 80. A
camada de transporte vai dividir a informação em “pacotes” e os encaminhar pela internet usando o caminho mais curto disponível.
- Cada pacote usa o internet protocol (IP) para saber a origem e o destino dentro da rede.
- Camada de rede. Infra física onde aqueles pacotes vão viajar.


Podemos usar o Http para enviar texto, imagens, som, vídeo, documentos, etc

Basicamente funciona num sistema de pergunta e resposta. Quando dois lados se comunicam um funciona como servidor e outro como cliente.

O cliente faz uma pergunta ao servidor (requisição), o servidor responde processando a requisição e devolvendo uma mensagem para o cliente servindo os dados
demandados (resposta).


Este sistema de requisição-resposta pode ser de vários tipos diferentes.

Esses tipos são os famosos verbos.

Toda a Web funciona encima do ciclo Request-Response.


Mas como funciona tudo?
Primeiro, você e o servidor estão conectados usando uma rede física, infraestrutura que consiste em servidores, cabos, wi-fi, switchs, etc.
Segundo, existe o protocolo TCP/IP que permite a conexão e trafego de informação usando essa rede.
Terceiro, quando esta conexão está estabelecida, é aqui que o cliente envia um Request HTTP (requisição) para o servidor.
Quarto, o servidor processa o Request e envia uma resposta em forma de mensagem Response HTTP para o cliente.
Aqui o ciclo fecha-se.


Mensagem HTTP Request

A mensagem HTTP contem normalmente 2 partes.
- Uma linha que sinaliza o começo da mensagem (Get + recurso solicitado).
- Um encabeçado Headers.

Mensagem HTTP Response
A mensagem HTTP contem normalmente 3 partes.
- Uma linha que sinaliza o começo da mensagem (status).
- Um encabeçado Headers.
- Um corpo Body.

Uma mensagem de Request é diferente de uma mensagem de Response, contém informação diferente.

Request normalmente tem o tipo do método (GET, POST), a versão do protocolo usada, uma serie de valores ou parâmetros e pode ter um conteúdo.

Response normalmente tem um status code, a versão do protocolo, e o corpo da resposta.

Métodos ou verbos HTTP

São basicamente ordens que você envia ao servidor. Com essas ordens o servidor sabe que tipo de operação estamos querendo realizar.

GET normalmente é para pedir uma informação ao servidor, por exemplo, quando queremos mostrar uma página Web.

POST é para enviar uma informação ao servidor, por exemplo, enviar um correio eletrônico ou realizar uma compra online.

DELETE é para apagar algum valor do servidor.

etc.

Status codes

Quando um cliente faz um request a um servidor, o servidor o processa e responde com um código de estado.

Por exemplo, se tudo deu certo o servidor vai responder com um 200 OK.

Mas, se houve um erro ou o recurso que estamos pedindo não existe, receberemos o famoso 404: file not found.

Existem muitos status codes, cada um representa um estado da resposta.


Respostas de informação (100-199),

Respostas de sucesso (200-299),

Redirecionamentos (300-399).

Erros do cliente (400-499).

Erros do servidor (500-599).



HomeController.cs


16. Criação de Models

17. Uso de Viewbags e Viewdata

18. Mapeamento de urls com MVC. URLs personalizadas.

19. Views Asp .NET

20. Recapitulando

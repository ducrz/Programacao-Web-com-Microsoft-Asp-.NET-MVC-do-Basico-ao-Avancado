Seção 5: Desenvolvimento de Aplicações Web Avançado


30. O que vamos aprender nesta seção?

31. Mapeamento de Model, ViewModel com Automapper

Mapeamento de classes
Já vimos como usar um Model e também um ViewModel. Vimos quando é adequado usar um ou o outro.

Numa aplicação Web que utiliza ViewModels, vamos precisar uma forma de copiar os dados pertinentes da ViewModel para a Model.
Assim os dados vão passando de camada em camada da nossa aplicação.


Mapeamento de classes

Poderíamos simplesmente usar um método onde copiaríamos os dados de um objeto para o outro de forma manual.
Para não duplicar código, teríamos ainda que pensar numa forma de fazer isso criando código que possa ser reutilizável.

Automapper


Mapeamento de classes
Precisamos apenas algumas configurações...
- Instalar o pacote Automapper
- Criar uma classe de configuração
- Configurar o Automapper no inicio do sistema
- Injetar isso onde for necessário.

Automapper
- Criar uma classe de configuração

public class AutomapperProfile : Profile {
	public AutomapperProfile() {
		CreateMap<Cliente, ClienteViewModel>().ReverseMap();
	}
}


Mapeamento de classes

- Configurar o Automapper no inicio do sistema Startup.cs

services.AddAutoMapper(typeof(Startup));


Mapeamento de classes

- Injetar isso onde for necessário.


var clienteModel = new Cliente();
var clienteViewModel = _mapper.Map<ClienteViewModel>(clienteModel);
Return View(clienteViewModel);


Como injetar o IMapper no Controller Cliente para poder usar o Autommaper.


Dependencies > Manage NuGet Packages> AutoMapper.Extensions.Microsoft.DependencyInjection

Dica Visual Studio: ctor + 2xtab, cria construtor.




32. Helpers. Como construir um Helper.


Helpers

São métodos estáticos que possuem código que nos ajudam na renderização de Views.

Temos dois tipos no ASP.Net:
Html Helpers
Tag Helpers

Podemos criar nossos próprios Helpers e assim poder reutilizar código de View, assim como evitar duplicação.

HTML Helpers

Temos muitos Helpers que nos ajudam a renderizar Views no ASP.Net, por exemplo:

@Html.DisplayNameFor(model => model.id)

O legal é que ASP.Net nos permite criar os nossos próprios Helpers


HTML Helpers

public static class HtmlExtender{
public static IHtmlContent DisplayTrueFalse(bool valueBooleano){
var span = new TagBuilder("span");
if (valueBooleano){
span.AddCssClass("badge badge-success");
span.InnerHtml.Append("Verdadeiro");
}
else{
span.AddCssClass("badge badge-danger");
span.InnerHtml.Append("Falso");
}
return span;
}
}

TAG Helpers
É o mesmo principio, só que aplicado as Tags
[HtmlTargetElement("nome-pessoa")]
public class RazorTagHelper : TagHelper
{
public string nome { get; set; }
public override void Process(TagHelperContext context, TagHelperOutput output)
{
var span = new TagBuilder("span");
span.AddCssClass("badge badge-info");
span.InnerHtml.Append(nome);
output.Content.AppendHtml(span);
}
}




33. Criado uma aplicação Web do zero.

Vamos dar inicio a primeira aplicação Web


- Criação do projeto
- Criação das Views, Controllers, camada de negócio e camada de dados.
- Aplicando o aprendido até agora no curso

Projeto LocadoraDeCarros



34. Uso de componentes de Terceiros no Desenvolvimento Web

Instalar e usar componentes JS de terceiros

Apesar que os componentes Html avançaram bastante, há ainda alguns componentes de terceiros que adicionam funcionalidades aos componentes de base.

Por exemplo, quando construímos uma table na nossa aplicação, vimos que implementar uma busca ou paginação acaba sendo um trabalho manual.



Select 2

É um componente que trabalha igual que uma combo box porém, com funcionalidades estendidas.

https://github.com/select2/select2
https://select2.org

Pode ser instalado no seu projeto Web a partir do Nuget.


Como funciona?
Fazer o download dos arquivos Js e CSS.
Copiar para a pasta que corresponde no nosso projeto Web.


<select class=“MinhaSelect" name=“Estados">
<option value=“RJ">Rio de Janeiro</option>
<option value=“SP">São Paulo</option>
</select>
<script>
$(document).ready(function () {
$('.MinhaSelect').select2();
});
</script>

@section Scripts{ 

    <script>
        $(document).ready(function () {
            $('.js-example-basic-single').select2();
        });
    </script>
}



https://getbootstrap.com



35. Uso de DataTables

36. Recapitulando
